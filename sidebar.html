<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>다단계 카테고리 사이드바</title>
    <style>
        #sidebar {
            width: 300px;
            background-color: #f1f1f1;
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        .category, .subcategory, .subsubcategory {
            margin-left: 20px;
        }
        .category-toggle, .subcategory-toggle {
            cursor: pointer;
            user-select: none;
            padding: 5px;
            background-color: #ddd;
            display: inline-block;
            width: 20px;
            text-align: center;
            margin-right: 5px;
        }
        .category > a, .subcategory > a, .subsubcategory > a {
            text-decoration: none;
            color: #333;
        }
        .subcategory, .subsubcategory {
            display: none;
        }
        .subcategory > div, .subsubcategory > div {
            margin: 5px 0;
        }
        .error-message {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="sidebar">
        <h2>카테고리</h2>
        <div class="category">
            <span class="category-toggle" role="button" aria-expanded="false" aria-controls="category1">▶</span>
            <a href="#category1">게임 개발</a>
            <div id="category1" class="subcategory">
                <div>
                    <span class="subcategory-toggle" role="button" aria-expanded="false" aria-controls="sub1-1">▶</span>
                    <a href="#sub1-1">프로그래밍</a>
                    <div id="sub1-1" class="subsubcategory">
                        <div><a href="#sub1-1-1">C++</a></div>
                        <div><a href="#sub1-1-2">Unity</a></div>
                    </div>
                </div>
                <div>
                    <span class="subcategory-toggle" role="button" aria-expanded="false" aria-controls="sub1-2">▶</span>
                    <a href="#sub1-2">레벨디자인</a>
                    <div id="sub1-2" class="subsubcategory">
                        <div><a href="#sub1-2-1">환경 디자인</a></div>
                        <div><a href="#sub1-2-2">게임플레이 흐름</a></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="category">
            <span class="category-toggle" role="button" aria-expanded="false" aria-controls="category2">▶</span>
            <a href="#category2">Gray Planet</a>
            <div id="category2" class="subcategory">
                <div>
                    <span class="subcategory-toggle" role="button" aria-expanded="false" aria-controls="sub2-1">▶</span>
                    <a href="#sub2-1">지역</a>
                    <div id="sub2-1" class="subsubcategory">
                        <div><a href="#sub2-1-1">숲</a></div>
                        <div><a href="#sub2-1-2">사막</a></div>
                    </div>
                </div>
                <div><a href="#sub2-2">몬스터들</a></div>
                <div><a href="#sub2-3">장비들</a></div>
            </div>
        </div>
        <div class="category">
            <span class="category-toggle" role="button" aria-expanded="false" aria-controls="category3">▶</span>
            <a href="#category3">기타</a>
            <div id="category3" class="subcategory">
                <div><a href="#sub3-1">기타_1</a></div>
                <div><a href="#sub3-2">기타_2</a></div>
            </div>
        </div>
    </div>

    <script>
    function setupSidebarInteractions() {
        const sidebar = document.getElementById('sidebar');
        
        sidebar.addEventListener('click', function(event) {
            const toggle = event.target.closest('.category-toggle, .subcategory-toggle');
            if (toggle) {
                const parent = toggle.closest('.category, .subcategory');
                const child = parent.querySelector('.subcategory, .subsubcategory');
                
                if (child) {
                    toggle.textContent = toggle.textContent === '▶' ? '▼' : '▶';
                    toggle.setAttribute('aria-expanded', toggle.textContent === '▼');
                    child.style.display = child.style.display === 'none' || child.style.display === '' ? 'block' : 'none';
                }
            }
        });

        // 키보드 접근성
        sidebar.addEventListener('keydown', function(event) {
            if (event.key === 'Enter' || event.key === ' ') {
                const toggle = event.target.closest('.category-toggle, .subcategory-toggle');
                if (toggle) {
                    event.preventDefault();
                    toggle.click();
                }
            }
        });

        // ARIA 속성 초기화
        sidebar.querySelectorAll('.category-toggle, .subcategory-toggle').forEach((toggle) => {
            toggle.setAttribute('aria-expanded', 'false');
        });
    }

    document.addEventListener('DOMContentLoaded', setupSidebarInteractions);
    </script>
</body>
</html>
